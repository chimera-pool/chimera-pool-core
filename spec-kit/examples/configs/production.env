# Chimera Mining Pool - Production Configuration
# Copy this file to .env and customize for your production environment

# =============================================================================
# POOL CONFIGURATION
# =============================================================================

# Pool Identity
POOL_NAME="Chimera Mining Pool"
POOL_DESCRIPTION="High-performance BlockDAG mining pool"
POOL_WEBSITE="https://your-pool.com"
POOL_CONTACT="admin@your-pool.com"

# Pool Economics
POOL_FEE=1.0                    # Pool fee percentage (1.0 = 1%)
PAYOUT_THRESHOLD=1000000        # Minimum payout threshold (in satoshis)
PAYOUT_INTERVAL=3600            # Payout interval in seconds (3600 = 1 hour)
MINIMUM_DIFFICULTY=1000         # Minimum share difficulty

# Mining Configuration
MINING_ALGORITHM=blake2s        # Primary mining algorithm
BLOCK_TIME=60                   # Target block time in seconds
DIFFICULTY_ADJUSTMENT=2016      # Difficulty adjustment interval (blocks)
MAX_CONNECTIONS=2000            # Maximum concurrent miner connections

# =============================================================================
# NETWORK CONFIGURATION
# =============================================================================

# Service Ports
API_PORT=8080                   # REST API port
STRATUM_PORT=18332             # Stratum mining port
WEB_PORT=3000                  # Web dashboard port
ADMIN_PORT=8443                # Admin interface port (HTTPS)

# External URLs (for production deployment)
PUBLIC_API_URL=https://api.your-pool.com
PUBLIC_WEB_URL=https://your-pool.com
PUBLIC_STRATUM_HOST=stratum.your-pool.com

# Load Balancer Configuration
ENABLE_LOAD_BALANCER=true
LOAD_BALANCER_ALGORITHM=round_robin  # round_robin, least_connections, ip_hash

# =============================================================================
# DATABASE CONFIGURATION
# =============================================================================

# PostgreSQL Primary Database
DATABASE_URL=postgres://chimera:CHANGE_ME@postgres:5432/chimera_pool?sslmode=require
POSTGRES_DB=chimera_pool
POSTGRES_USER=chimera
POSTGRES_PASSWORD=CHANGE_ME_SECURE_PASSWORD

# Database Connection Pool
DB_MAX_CONNECTIONS=100
DB_MIN_CONNECTIONS=10
DB_CONNECTION_TIMEOUT=30
DB_IDLE_TIMEOUT=600

# Database Backup Configuration
BACKUP_ENABLED=true
BACKUP_SCHEDULE="0 2 * * *"     # Daily at 2 AM
BACKUP_RETENTION_DAYS=30
BACKUP_S3_BUCKET=your-backup-bucket
BACKUP_S3_REGION=us-east-1

# Read Replicas (for scaling)
ENABLE_READ_REPLICAS=true
READ_REPLICA_URL=postgres://chimera:CHANGE_ME@postgres-replica:5432/chimera_pool?sslmode=require

# =============================================================================
# CACHE CONFIGURATION
# =============================================================================

# Redis Configuration
REDIS_URL=redis://redis:6379/0
REDIS_PASSWORD=CHANGE_ME_REDIS_PASSWORD
REDIS_MAX_CONNECTIONS=50
REDIS_TIMEOUT=5

# Cache Settings
CACHE_TTL_SHORT=300             # 5 minutes
CACHE_TTL_MEDIUM=1800           # 30 minutes
CACHE_TTL_LONG=3600             # 1 hour

# Session Configuration
SESSION_TIMEOUT=86400           # 24 hours
SESSION_CLEANUP_INTERVAL=3600   # 1 hour

# =============================================================================
# SECURITY CONFIGURATION
# =============================================================================

# Encryption Keys (CHANGE THESE!)
JWT_SECRET=CHANGE_ME_64_CHARACTER_JWT_SECRET_KEY_HERE_VERY_SECURE
ENCRYPTION_KEY=CHANGE_ME_32_CHARACTER_ENCRYPTION_KEY
API_KEY_SECRET=CHANGE_ME_API_KEY_SECRET

# Password Policy
PASSWORD_MIN_LENGTH=12
PASSWORD_REQUIRE_UPPERCASE=true
PASSWORD_REQUIRE_LOWERCASE=true
PASSWORD_REQUIRE_NUMBERS=true
PASSWORD_REQUIRE_SYMBOLS=true
PASSWORD_MAX_AGE_DAYS=90

# Rate Limiting
RATE_LIMIT_ENABLED=true
RATE_LIMIT_REQUESTS_PER_MINUTE=100
RATE_LIMIT_BURST_SIZE=200
RATE_LIMIT_WHITELIST=127.0.0.1,::1

# DDoS Protection
DDOS_PROTECTION_ENABLED=true
DDOS_MAX_CONNECTIONS_PER_IP=10
DDOS_CONNECTION_RATE_LIMIT=5    # connections per second per IP
DDOS_BAN_DURATION=3600          # 1 hour

# SSL/TLS Configuration
SSL_ENABLED=true
SSL_CERT_PATH=/etc/ssl/certs/your-pool.crt
SSL_KEY_PATH=/etc/ssl/private/your-pool.key
SSL_PROTOCOLS=TLSv1.2,TLSv1.3
HSTS_ENABLED=true
HSTS_MAX_AGE=31536000

# Multi-Factor Authentication
MFA_ENABLED=true
MFA_ISSUER="Chimera Mining Pool"
MFA_BACKUP_CODES_COUNT=10

# =============================================================================
# MONITORING & LOGGING
# =============================================================================

# Logging Configuration
LOG_LEVEL=info                  # debug, info, warn, error
LOG_FORMAT=json                 # json, text
LOG_FILE_ENABLED=true
LOG_FILE_PATH=/var/log/chimera-pool/app.log
LOG_ROTATION_SIZE=100MB
LOG_RETENTION_DAYS=30

# Metrics Configuration
METRICS_ENABLED=true
METRICS_PORT=9090
METRICS_PATH=/metrics
PROMETHEUS_RETENTION=15d

# Alerting Configuration
ALERTS_ENABLED=true
ALERT_EMAIL=admin@your-pool.com
ALERT_WEBHOOK_URL=https://hooks.slack.com/your-webhook
ALERT_CRITICAL_THRESHOLD=95    # CPU/Memory threshold for critical alerts

# Health Checks
HEALTH_CHECK_ENABLED=true
HEALTH_CHECK_INTERVAL=30       # seconds
HEALTH_CHECK_TIMEOUT=10        # seconds

# =============================================================================
# EMAIL CONFIGURATION
# =============================================================================

# SMTP Settings
SMTP_ENABLED=true
SMTP_HOST=smtp.your-provider.com
SMTP_PORT=587
SMTP_USERNAME=noreply@your-pool.com
SMTP_PASSWORD=CHANGE_ME_SMTP_PASSWORD
SMTP_TLS=true
SMTP_FROM_NAME="Chimera Mining Pool"
SMTP_FROM_EMAIL=noreply@your-pool.com

# Email Templates
EMAIL_WELCOME_ENABLED=true
EMAIL_PAYOUT_ENABLED=true
EMAIL_SECURITY_ALERTS_ENABLED=true

# =============================================================================
# BLOCKCHAIN CONFIGURATION
# =============================================================================

# BlockDAG Network Settings
BLOCKCHAIN_NETWORK=mainnet      # mainnet, testnet, regtest
BLOCKCHAIN_RPC_URL=http://blockdag-node:8332
BLOCKCHAIN_RPC_USER=rpcuser
BLOCKCHAIN_RPC_PASSWORD=CHANGE_ME_RPC_PASSWORD
BLOCKCHAIN_RPC_TIMEOUT=30

# Block Validation
BLOCK_CONFIRMATION_COUNT=6
BLOCK_VALIDATION_TIMEOUT=300    # 5 minutes
ORPHAN_BLOCK_THRESHOLD=10

# Transaction Configuration
TX_FEE_RATE=1000               # satoshis per byte
TX_CONFIRMATION_BLOCKS=6
TX_TIMEOUT=3600                # 1 hour

# =============================================================================
# PERFORMANCE TUNING
# =============================================================================

# Worker Configuration
WORKER_PROCESSES=auto          # auto, or specific number
WORKER_CONNECTIONS=1000
WORKER_TIMEOUT=30

# Memory Management
MEMORY_LIMIT=2GB
GC_THRESHOLD=80                # Garbage collection threshold (%)

# Connection Pooling
CONNECTION_POOL_SIZE=50
CONNECTION_POOL_TIMEOUT=30
CONNECTION_POOL_IDLE_TIMEOUT=300

# Caching Strategy
CACHE_STRATEGY=redis           # redis, memory, hybrid
CACHE_COMPRESSION=true
CACHE_SERIALIZATION=json       # json, msgpack, pickle

# =============================================================================
# DEVELOPMENT & DEBUGGING
# =============================================================================

# Environment
NODE_ENV=production
GO_ENV=production
DEBUG=false

# Development Features (DISABLE IN PRODUCTION)
DEV_MODE=false
DEBUG_API=false
ENABLE_PROFILING=false
MOCK_BLOCKCHAIN=false

# Testing Configuration
TEST_MODE=false
TEST_DATABASE_URL=postgres://test:test@postgres-test:5432/chimera_pool_test

# =============================================================================
# CLOUD & DEPLOYMENT
# =============================================================================

# Container Configuration
CONTAINER_MEMORY_LIMIT=2g
CONTAINER_CPU_LIMIT=2
RESTART_POLICY=unless-stopped

# Kubernetes Configuration
K8S_NAMESPACE=chimera-pool
K8S_SERVICE_ACCOUNT=chimera-pool-sa
K8S_INGRESS_CLASS=nginx

# AWS Configuration (if using AWS)
AWS_REGION=us-east-1
AWS_S3_BUCKET=your-chimera-pool-bucket
AWS_CLOUDWATCH_LOG_GROUP=/aws/chimera-pool

# Monitoring & Observability
JAEGER_ENABLED=false
JAEGER_ENDPOINT=http://jaeger:14268/api/traces
DATADOG_ENABLED=false
DATADOG_API_KEY=your-datadog-api-key

# =============================================================================
# FEATURE FLAGS
# =============================================================================

# Core Features
ENABLE_WEB_DASHBOARD=true
ENABLE_API_DOCS=true
ENABLE_WEBSOCKETS=true
ENABLE_GRAPHQL=false

# Mining Features
ENABLE_ALGORITHM_SWITCHING=true
ENABLE_MERGED_MINING=false
ENABLE_SOLO_MINING=true

# Social Features
ENABLE_TEAMS=true
ENABLE_LEADERBOARDS=true
ENABLE_ACHIEVEMENTS=true
ENABLE_REFERRALS=true

# Advanced Features
ENABLE_AI_ASSISTANT=true
ENABLE_PREDICTIVE_ANALYTICS=false
ENABLE_MACHINE_LEARNING=false

# =============================================================================
# COMPLIANCE & LEGAL
# =============================================================================

# Regulatory Compliance
COMPLIANCE_MODE=standard       # standard, strict, custom
KYC_ENABLED=false
AML_ENABLED=false
GDPR_COMPLIANCE=true

# Data Retention
DATA_RETENTION_DAYS=365
LOG_RETENTION_DAYS=90
BACKUP_RETENTION_DAYS=30

# Privacy Settings
PRIVACY_MODE=standard          # minimal, standard, enhanced
ANALYTICS_ENABLED=true
TRACKING_ENABLED=false

# =============================================================================
# CUSTOM EXTENSIONS
# =============================================================================

# Plugin System
PLUGINS_ENABLED=true
PLUGIN_DIRECTORY=/app/plugins
PLUGIN_AUTO_LOAD=true

# Custom Algorithms
CUSTOM_ALGORITHMS_ENABLED=true
ALGORITHM_PLUGIN_PATH=/app/algorithms

# Webhooks
WEBHOOKS_ENABLED=true
WEBHOOK_TIMEOUT=30
WEBHOOK_RETRY_COUNT=3

# =============================================================================
# MAINTENANCE
# =============================================================================

# Maintenance Mode
MAINTENANCE_MODE=false
MAINTENANCE_MESSAGE="Pool is under maintenance. Please try again later."
MAINTENANCE_ALLOWED_IPS=127.0.0.1

# Automatic Updates
AUTO_UPDATE_ENABLED=false
UPDATE_CHANNEL=stable          # stable, beta, alpha
UPDATE_CHECK_INTERVAL=86400    # 24 hours

# Cleanup Tasks
CLEANUP_ENABLED=true
CLEANUP_SCHEDULE="0 3 * * *"   # Daily at 3 AM
CLEANUP_OLD_SHARES_DAYS=7
CLEANUP_OLD_LOGS_DAYS=30